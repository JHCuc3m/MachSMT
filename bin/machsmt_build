#!/usr/bin/env python3
import sys
import traceback
import pdb
import cProfile
from machsmt import MachSMT, warning, die, DataBase, config


def main():
    if len(config.files) > 0 :
        machsmt = MachSMT(config.files)
    elif config.debug:
        machsmt = MachSMT.load(config.lib)
    machsmt.save(config.lib)


if __name__ == '__main__':
    try:
        if config.profile:
            cProfile.run('main()', sort=2)
        else:
            main()
    except BaseException:
        extype, value, tb = sys.exc_info()
        traceback.print_exc()
        if config.debug:
            pdb.post_mortem(tb)
